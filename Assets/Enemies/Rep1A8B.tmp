[gd_scene load_steps=25 format=3 uid="uid://cpvkvfsmi2jok"]

[ext_resource type="Script" path="res://Assets/Scripts/Entity.gd" id="1_u23pf"]
[ext_resource type="Texture2D" uid="uid://dxliavxps26" path="res://Assets/3Dmodels/Reptal/uncanny_valley_face_.png" id="2_8htui"]
[ext_resource type="Texture2D" uid="uid://bkur45ph2pp8e" path="res://Assets/3Dmodels/Reptal/Reptal-ace0e60c0fa3b2c7e074941464261f54_NormalMap.png" id="2_kpggy"]
[ext_resource type="PackedScene" uid="uid://bk66feipl2g0v" path="res://Assets/3Dmodels/Reptal/Reptal.fbx" id="2_lvebp"]
[ext_resource type="Texture2D" uid="uid://bpj32xj5ejlm7" path="res://Assets/3Dmodels/Reptal/headless_river_troll.png" id="2_opr0g"]
[ext_resource type="Texture2D" uid="uid://1qnijo31jldh" path="res://Assets/3Dmodels/Reptal/Reptal-ace0e60c0fa3b2c7e074941464261f54_NormalMap (2).png" id="4_ibbak"]
[ext_resource type="Script" path="res://Assets/Scripts/States/State Machine.gd" id="6_weoln"]
[ext_resource type="Script" path="res://Assets/Scripts/States/Idle.gd" id="7_65rw4"]
[ext_resource type="Script" path="res://Assets/Scripts/States/Scan.gd" id="9_20hga"]
[ext_resource type="Script" path="res://Assets/Scripts/States/Chase.gd" id="9_sx0r7"]
[ext_resource type="Script" path="res://Assets/Scripts/States/Eat.gd" id="11_gdunc"]
[ext_resource type="AudioStream" uid="uid://b0p8b4bhbmir2" path="res://Assets/SFX/monster_scream/1.wav" id="12_7lxi5"]
[ext_resource type="AudioStream" uid="uid://csfs6tmxprskq" path="res://Assets/SFX/dramaticStab.mp3" id="13_l0pyh"]
[ext_resource type="Script" path="res://Assets/Scripts/stats.gd" id="14_e11c1"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_bd351"]
noise_type = 5
seed = 465
frequency = 0.0365

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_yr8ml"]
noise = SubResource("FastNoiseLite_bd351")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5fr25"]
resource_name = "headless river troll, ambiguously textured f.. (3410997939)"
cull_mode = 2
vertex_color_use_as_albedo = true
albedo_color = Color(1, 0.290196, 0.211765, 1)
albedo_texture = ExtResource("2_opr0g")
metallic = 0.4
roughness = 0.51
roughness_texture = SubResource("NoiseTexture2D_yr8ml")
normal_enabled = true
normal_scale = -0.68
normal_texture = ExtResource("2_kpggy")
rim_enabled = true

[sub_resource type="FastNoiseLite" id="FastNoiseLite_5vv66"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_nua14"]
noise = SubResource("FastNoiseLite_5vv66")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jcy15"]
resource_name = "uncanny valley face (2144967689)"
cull_mode = 2
vertex_color_use_as_albedo = true
albedo_color = Color(1, 0, 0, 1)
albedo_texture = ExtResource("2_8htui")
metallic = 0.3
metallic_specular = 0.49
roughness_texture = SubResource("NoiseTexture2D_nua14")
normal_enabled = true
normal_scale = -7.49
normal_texture = ExtResource("4_ibbak")

[sub_resource type="SphereShape3D" id="SphereShape3D_qflvf"]
radius = 1.25685

[sub_resource type="AudioStream" id="AudioStream_prt2l"]

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_ir6kx"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/sync = true
properties/0/watch = false
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/sync = true
properties/1/watch = false
properties/2/path = NodePath("stats:baseAnimation")
properties/2/spawn = true
properties/2/sync = true
properties/2/watch = false
properties/3/path = NodePath("stats:animSpeed")
properties/3/spawn = true
properties/3/sync = true
properties/3/watch = false
properties/4/path = NodePath("stats:current_hp")
properties/4/spawn = true
properties/4/sync = true
properties/4/watch = false

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_41ds6"]
height = 3.40703

[node name="Reptal" type="CharacterBody3D" node_paths=PackedStringArray("animator", "stats", "stateMachine")]
script = ExtResource("1_u23pf")
powerLevel = 1
animator = NodePath("Reptal/AnimationPlayer")
stats = NodePath("stats")
stateMachine = NodePath("State Machine")
vocalsDirectory = "res://Assets/SFX/ghoul_noises/"
screamDirectory = "res://Assets/SFX/monster_scream/"
offensiveDirectory = "res://Assets/SFX/monster_scream/"

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 1, 0)
target_position = Vector3(0, -2, 0)
collision_mask = 32
debug_shape_custom_color = Color(1, 0, 0, 1)

[node name="Reptal" parent="." instance=ExtResource("2_lvebp")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, -0.222696, 0)

[node name="Skeleton3D" parent="Reptal/RootNode/root" index="0"]
bones/0/position = Vector3(-2.12065e-10, -0.00389739, 0.892667)
bones/0/rotation = Quaternion(0.839411, -1.84914e-06, -2.86391e-06, 0.543497)
bones/1/position = Vector3(4.02645e-10, 0.196028, 2.15172e-05)
bones/1/rotation = Quaternion(-0.365172, -0.00314877, -0.000518948, 0.930934)
bones/2/rotation = Quaternion(0.263273, 0.00318494, -0.000869117, 0.964716)
bones/4/position = Vector3(-1.01253e-06, 0.269856, 7.48353e-05)
bones/4/rotation = Quaternion(0.182841, -0.00665013, 0.00122372, 0.983119)
bones/5/rotation = Quaternion(0.660372, 0.218661, 0.703436, 0.145856)
bones/6/rotation = Quaternion(1.27959e-08, 7.52224e-08, 0.292974, 0.95612)
bones/7/rotation = Quaternion(0.344058, 0.569104, -0.405576, 0.627099)
bones/7/scale = Vector3(0.500475, 0.500475, 0.500475)
bones/8/rotation = Quaternion(-4.92592e-07, 0.908668, 0.417519, -6.65964e-07)
bones/9/rotation = Quaternion(-6.71243e-09, 0.000348263, 1.54794e-08, 1)
bones/10/rotation = Quaternion(-5.62874e-09, -0.000531626, -7.84216e-08, 1)
bones/11/rotation = Quaternion(-0.660367, 0.21866, 0.70344, -0.145857)
bones/12/rotation = Quaternion(-1.07683e-09, -1.10324e-07, -0.292974, 0.95612)
bones/13/rotation = Quaternion(0.344058, -0.569104, 0.405576, 0.627099)
bones/13/scale = Vector3(0.500475, 0.500475, 0.500475)
bones/14/rotation = Quaternion(5.24444e-07, 0.908668, 0.417519, 6.806e-07)
bones/15/rotation = Quaternion(-1.08442e-08, -0.00034827, 8.54138e-09, 1)
bones/16/rotation = Quaternion(2.88434e-08, 0.000531735, 4.20025e-08, 1)

[node name="Cube_002" parent="Reptal/RootNode/root/Skeleton3D" index="0"]
"blend_shapes/Key 1" = 0.386782
surface_material_override/0 = SubResource("StandardMaterial3D_5fr25")
surface_material_override/1 = SubResource("StandardMaterial3D_jcy15")

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Reptal/RootNode/root/Skeleton3D" index="1"]
transform = Transform3D(0.999994, -0.000695897, -0.00345159, 2.12104e-05, -0.979066, 0.203542, -0.00352099, -0.203541, -0.97906, 0.00178014, -0.322139, 1.58635)
bone_name = "head.x"
bone_idx = 4

[node name="JawSlot" type="Node3D" parent="Reptal/RootNode/root/Skeleton3D/BoneAttachment3D"]
transform = Transform3D(0.974319, 0.0244058, -0.223846, 0.0915764, 0.865234, 0.492934, 0.20571, -0.500774, 0.840779, 0.0561553, 0.191873, 0.263166)

[node name="EatHitbox" type="Area3D" parent="Reptal/RootNode/root/Skeleton3D/BoneAttachment3D/JawSlot"]
transform = Transform3D(0.404567, -0.083913, 0.281574, -0.151045, 0.351606, 0.321806, -0.252013, -0.345445, 0.259147, 0, 0, 0.09)
collision_layer = 0
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="Reptal/RootNode/root/Skeleton3D/BoneAttachment3D/JawSlot/EatHitbox"]
shape = SubResource("SphereShape3D_qflvf")

[node name="State Machine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("6_weoln")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="State Machine" node_paths=PackedStringArray("nav", "jawSlot", "entity")]
script = ExtResource("7_65rw4")
move_speed = 1
nav = NodePath("../../NavigationAgent3D")
jawSlot = NodePath("../../Reptal/RootNode/root/Skeleton3D/BoneAttachment3D/JawSlot")
entity = NodePath("../..")

[node name="Chase" type="Node" parent="State Machine" node_paths=PackedStringArray("jawSlot", "nav", "entity")]
script = ExtResource("9_sx0r7")
jawSlot = NodePath("../../Reptal/RootNode/root/Skeleton3D/BoneAttachment3D/JawSlot")
move_speed = 4
nav = NodePath("../../NavigationAgent3D")
vocalIndex = null
entity = NodePath("../..")

[node name="Scan" type="Node" parent="State Machine" node_paths=PackedStringArray("jawSlot", "entity")]
script = ExtResource("9_20hga")
jawSlot = NodePath("../../Reptal/RootNode/root/Skeleton3D/BoneAttachment3D/JawSlot")
entity = NodePath("../..")

[node name="Eat" type="Node" parent="State Machine" node_paths=PackedStringArray("jawSlot", "nav", "entity")]
script = ExtResource("11_gdunc")
jawSlot = NodePath("../../Reptal/RootNode/root/Skeleton3D/BoneAttachment3D/JawSlot")
move_speed = 1
nav = NodePath("../../NavigationAgent3D")
entity = NodePath("../..")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="Scream" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -1, 8.74228e-08, 0, -8.74228e-08, -1, 0, 2.7418, 2.7418)
stream = ExtResource("12_7lxi5")
volume_db = -10.0
unit_size = 32.5
max_distance = 20.0
bus = &"Reptal"
emission_angle_enabled = true
emission_angle_degrees = 90.0

[node name="Offensive" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -1, 8.74228e-08, 0, -8.74228e-08, -1, 0, 2.7418, 2.7418)
stream = ExtResource("12_7lxi5")
volume_db = -15.883
unit_size = 27.1
pitch_scale = 1.3
max_distance = 60.0
bus = &"Reptal"
emission_angle_enabled = true
emission_angle_degrees = 90.0

[node name="Eat" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -1, 8.74228e-08, 0, -8.74228e-08, -1, 0, 2.7418, 2.7418)
stream = ExtResource("13_l0pyh")
volume_db = -15.883
unit_size = 27.1
pitch_scale = 1.3
max_distance = 60.0
bus = &"Reptal"
emission_angle_enabled = true
emission_angle_degrees = 90.0

[node name="Vocals" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 2.7418, 1.19848e-07)
visible = false
stream = SubResource("AudioStream_prt2l")
volume_db = -10.0
max_distance = 20.0
bus = &"Reptal"
emission_angle_enabled = true
emission_angle_degrees = 90.0

[node name="LeftFootstep" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0)
stream = SubResource("AudioStream_prt2l")
volume_db = -15.0
max_distance = 20.0
bus = &"Physical"
emission_angle_enabled = true
emission_angle_degrees = 90.0

[node name="RightFootstep" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0)
stream = SubResource("AudioStream_prt2l")
volume_db = -15.0
max_distance = 20.0
bus = &"Physical"
emission_angle_enabled = true
emission_angle_degrees = 90.0

[node name="stats" type="Node" parent="."]
script = ExtResource("14_e11c1")
MAX_HP = 10

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_ir6kx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.67782, 0)
shape = SubResource("CapsuleShape3D_41ds6")

[editable path="Reptal"]
