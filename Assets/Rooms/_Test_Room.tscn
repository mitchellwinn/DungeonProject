[gd_scene load_steps=19 format=3 uid="uid://bw4ggmyfp3y32"]

[ext_resource type="Script" path="res://Assets/Scripts/Room.gd" id="1_r3if7"]
[ext_resource type="PackedScene" uid="uid://c67wf1jvv4peo" path="res://Assets/3Dmodels/Chandeliere/Chandelier_01_1k.glb" id="2_0nnng"]
[ext_resource type="Script" path="res://Assets/Scripts/Entrance.gd" id="2_4o6ve"]
[ext_resource type="Material" uid="uid://cxq6p1i8w82y8" path="res://Assets/Materials/BackRoomsWallpaper/Wallpaper.tres" id="3_m1th1"]
[ext_resource type="PackedScene" uid="uid://dkg35oi02xqg2" path="res://Assets/Prefabs/gate_of_horn.tscn" id="5_mt2wr"]
[ext_resource type="PackedScene" uid="uid://bdopk35decpw7" path="res://Assets/Prefabs/gate_of_ivory.tscn" id="6_5hcfa"]
[ext_resource type="Texture2D" uid="uid://bph8gbvhdglys" path="res://Assets/Materials/MISC/32WM95-A0090-1_v2.jpeg" id="17_luqw3"]

[sub_resource type="NavigationMesh" id="NavigationMesh_kpgbn"]
vertices = PackedVector3Array(0.942045, 0.3337, -4.20823, 0.592045, 0.3337, -4.50823, -0.557955, 0.3337, -4.50823, -0.907955, 0.3337, -4.20823, -0.957955, 0.3337, -1.10823, -0.707955, 0.4337, -0.708233, 0.692045, 0.4337, -0.708233, 0.942045, 0.3337, -1.10823, -0.907955, 0.3337, -4.20823, -1.40795, 0.3337, -4.20823, -1.40795, 0.3337, -1.20823, 1.39205, 0.3337, -1.20823, 1.39205, 0.3337, -4.20823, 0.942045, 0.3337, -4.20823, -1.40795, 0.3337, -1.20823, -0.957955, 0.3337, -1.10823, 0.942045, 0.3337, -1.10823, 1.39205, 0.3337, -1.20823, 0.942045, 0.3337, -4.20823, -0.907955, 0.3337, -4.20823, -4.25796, 0.3337, -0.858233, -2.45796, 0.3337, -0.658233, -2.20796, 0.3337, -0.958233, -4.25796, 0.3337, -0.858233, -2.20796, 0.3337, -0.958233, -1.65795, 0.3337, -1.20823, -1.40795, 0.3337, -4.20823, -4.20795, 0.3337, -4.20823, -1.65795, 0.3337, -1.20823, -1.40795, 0.3337, -1.20823, -1.40795, 0.3337, -4.20823, 1.79205, 0.3337, -1.15823, 2.29205, 0.3337, -0.858233, 4.24204, 0.3337, -0.958233, 1.39205, 0.3337, -1.20823, 1.79205, 0.3337, -1.15823, 4.24204, 0.3337, -0.958233, 4.24204, 0.3337, -4.20823, 1.39205, 0.3337, -4.20823, 4.49204, 0.3337, -0.00823307, 4.49204, 0.3337, -0.608233, 4.24204, 0.3337, -0.958233, 2.64205, 0.3337, -0.358233, 2.69205, 0.3337, -0.00823307, 4.24204, 0.3337, -0.958233, 2.29205, 0.3337, -0.858233, 2.64205, 0.3337, -0.358233, -4.25796, 0.3337, -0.858233, -4.50796, 0.3337, -0.558233, -4.50796, 0.3337, 0.591767, -4.25796, 0.3337, 0.891767, -2.65795, 0.3337, 0.291767, -2.70796, 0.3337, -0.108233, -4.25796, 0.3337, 0.891767, -2.45796, 0.3337, 0.691767, -2.65795, 0.3337, 0.291767, -2.70796, 0.3337, -0.108233, -2.45796, 0.3337, -0.658233, -4.25796, 0.3337, -0.858233, 4.29205, 0.3337, 0.891767, 4.49204, 0.3337, 0.641767, 4.49204, 0.3337, -0.00823307, 2.69205, 0.3337, -0.00823307, 2.64205, 0.3337, 0.341767, 2.64205, 0.3337, 0.341767, 2.34204, 0.3337, 0.791767, 4.29205, 0.3337, 0.891767, -0.907955, 0.3337, 4.24177, -0.557955, 0.3337, 4.54177, 0.592045, 0.3337, 4.54177, 0.942045, 0.3337, 4.24177, 0.792045, 0.3337, 0.991767, 0.692045, 0.4337, 0.541767, -0.707955, 0.4337, 0.541767, -0.807955, 0.3337, 0.991767, 1.34204, 0.3337, 4.24177, 1.34204, 0.3337, 1.24177, 1.14205, 0.3337, 1.24177, 0.942045, 0.3337, 4.24177, -1.15795, 0.3337, 1.24177, -1.35795, 0.3337, 1.24177, -1.35795, 0.3337, 4.24177, -0.907955, 0.3337, 4.24177, 1.14205, 0.3337, 1.24177, 0.792045, 0.3337, 0.991767, -0.807955, 0.3337, 0.991767, -1.15795, 0.3337, 1.24177, -0.907955, 0.3337, 4.24177, 0.942045, 0.3337, 4.24177, -2.20796, 0.3337, 0.941767, -2.45796, 0.3337, 0.691767, -4.25796, 0.3337, 0.891767, -1.70796, 0.3337, 1.19177, -2.20796, 0.3337, 0.941767, -4.25796, 0.3337, 0.891767, -1.35795, 0.3337, 1.24177, -1.70796, 0.3337, 1.19177, -4.25796, 0.3337, 0.891767, -4.20795, 0.3337, 4.24177, -1.35795, 0.3337, 4.24177, 4.29205, 0.3337, 0.891767, 2.34204, 0.3337, 0.791767, 1.94205, 0.3337, 1.09177, 4.29205, 0.3337, 0.891767, 1.94205, 0.3337, 1.09177, 1.34204, 0.3337, 1.24177, 1.34204, 0.3337, 4.24177, 4.24204, 0.3337, 4.24177)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(10, 9, 8), PackedInt32Array(13, 12, 11), PackedInt32Array(16, 15, 17), PackedInt32Array(17, 15, 14), PackedInt32Array(17, 14, 19), PackedInt32Array(17, 19, 18), PackedInt32Array(22, 21, 20), PackedInt32Array(24, 23, 25), PackedInt32Array(25, 23, 27), PackedInt32Array(25, 27, 26), PackedInt32Array(30, 29, 28), PackedInt32Array(33, 32, 31), PackedInt32Array(35, 34, 36), PackedInt32Array(36, 34, 38), PackedInt32Array(36, 38, 37), PackedInt32Array(40, 39, 41), PackedInt32Array(41, 39, 42), PackedInt32Array(42, 39, 43), PackedInt32Array(44, 46, 45), PackedInt32Array(48, 47, 49), PackedInt32Array(49, 47, 50), PackedInt32Array(50, 47, 52), PackedInt32Array(50, 52, 51), PackedInt32Array(54, 53, 55), PackedInt32Array(58, 57, 56), PackedInt32Array(60, 59, 61), PackedInt32Array(61, 59, 63), PackedInt32Array(61, 63, 62), PackedInt32Array(66, 65, 64), PackedInt32Array(68, 67, 69), PackedInt32Array(69, 67, 70), PackedInt32Array(72, 71, 73), PackedInt32Array(73, 71, 74), PackedInt32Array(76, 75, 77), PackedInt32Array(77, 75, 78), PackedInt32Array(80, 79, 81), PackedInt32Array(81, 79, 82), PackedInt32Array(84, 83, 85), PackedInt32Array(85, 83, 86), PackedInt32Array(86, 83, 87), PackedInt32Array(87, 83, 88), PackedInt32Array(91, 90, 89), PackedInt32Array(92, 94, 93), PackedInt32Array(96, 95, 97), PackedInt32Array(97, 95, 99), PackedInt32Array(97, 99, 98), PackedInt32Array(102, 101, 100), PackedInt32Array(104, 103, 105), PackedInt32Array(105, 103, 106), PackedInt32Array(106, 103, 107)]
cell_size = 0.05
cell_height = 0.05
agent_max_climb = 1.0
agent_max_slope = 50.0
region_min_size = 1.0
region_merge_size = 5.0
edge_max_length = 20.0
detail_sample_distance = 10.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_02gmj"]
resource_name = "lamps_classic_chandelier_1"
blend_mode = 1
cull_mode = 2
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_color = Color(0.906332, 0.906332, 0.906332, 1)
roughness = 0.322727
emission_enabled = true
emission = Color(1, 1, 1, 1)
emission_energy_multiplier = 16.0
subsurf_scatter_enabled = true
subsurf_scatter_strength = 1.0
backlight_enabled = true
backlight = Color(1, 1, 1, 1)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_xwb6l"]
load_path = "res://.godot/imported/dirty_carpet_diff_1k.jpg-7c62357be3eb502ce6874921c95321b4.s3tc.ctex"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_06g5j"]
load_path = "res://.godot/imported/dirty_carpet_nor_gl_1k.png-4459ff5f617beb05cbf7f05741f744f6.s3tc.ctex"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_5qwhj"]
load_path = "res://.godot/imported/dirty_carpet_rough_1k.jpg-da6b1f06efcb6380ecd77185d19f9f44.s3tc.ctex"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nhbx2"]
albedo_texture = SubResource("CompressedTexture2D_xwb6l")
metallic_specular = 0.0
roughness_texture = SubResource("CompressedTexture2D_5qwhj")
emission_enabled = true
emission = Color(0.368627, 0.360784, 0.14902, 1)
emission_energy_multiplier = 10.0
emission_operator = 1
emission_texture = SubResource("CompressedTexture2D_xwb6l")
normal_enabled = true
normal_scale = -0.8
normal_texture = SubResource("CompressedTexture2D_06g5j")
rim = 0.25
rim_tint = 0.0
clearcoat_roughness = 0.0
heightmap_enabled = true
uv1_scale = Vector3(18, 18, 18)

[sub_resource type="BoxMesh" id="BoxMesh_ap6py"]
size = Vector3(10, 0.5, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_u2h5k"]
size = Vector3(2.16153, 3.01519, 1.06539)

[sub_resource type="BoxShape3D" id="BoxShape3D_yi4rm"]
size = Vector3(9.9, 10, 9.9)

[sub_resource type="QuadMesh" id="QuadMesh_852hj"]
size = Vector2(10, 10)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y3x5l"]
cull_mode = 2
albedo_texture = ExtResource("17_luqw3")
uv1_scale = Vector3(5, 5, 5)

[node name="_Test_Room" type="Node3D" node_paths=PackedStringArray("entrance1", "entrance2", "entrance3", "entrance4", "lightsParent", "roomBoundaries", "gateOfHorn", "gateOfIvory")]
script = ExtResource("1_r3if7")
entrance1 = NodePath("NavigationRegion3D/RoomOuter/NorthEntrance")
entrance2 = NodePath("NavigationRegion3D/RoomOuter/SouthEntrance")
entrance3 = NodePath("NavigationRegion3D/RoomOuter/EastEntrance")
entrance4 = NodePath("NavigationRegion3D/RoomOuter/WestEntrance")
lightsParent = NodePath("NavigationRegion3D/Lights")
roomBoundaries = NodePath("NavigationRegion3D/RoomBoundaries")
roomType = "Room"
gateOfHorn = NodePath("NavigationRegion3D/Gate Of Horn")
gateOfIvory = NodePath("NavigationRegion3D/Gate Of Ivory")
fogAmt = 0.1

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_kpgbn")

[node name="Lights" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.667299, 0)

[node name="OmniLight3D" type="OmniLight3D" parent="NavigationRegion3D/Lights" groups=["light"]]
transform = Transform3D(0.999999, 0.000962874, 0.000629219, -0.000962233, 0.999999, -0.0010181, -0.000630198, 0.00101749, 0.999999, -0.0095782, 7.4335, 1.68799)
light_color = Color(1, 0.729412, 0.584314, 1)
light_energy = 5.0
light_volumetric_fog_energy = 5.876
light_size = 0.285
light_specular = 7.51
shadow_enabled = true
shadow_blur = 5.0
distance_fade_enabled = true
omni_range = 13.4551
omni_attenuation = 2.07053

[node name="OmniLight3D2" type="OmniLight3D" parent="NavigationRegion3D/Lights" groups=["light"]]
transform = Transform3D(0.999999, 0.000962874, 0.000629219, -0.000962233, 0.999999, -0.0010181, -0.000630198, 0.0010175, 0.999999, 1.51052, 7.4335, 0.879374)
light_color = Color(1, 0.729412, 0.584314, 1)
light_energy = 5.0
light_volumetric_fog_energy = 5.876
light_size = 0.285
light_specular = 7.51
shadow_enabled = true
shadow_blur = 5.0
distance_fade_enabled = true
omni_range = 13.4551
omni_attenuation = 2.07053

[node name="OmniLight3D3" type="OmniLight3D" parent="NavigationRegion3D/Lights" groups=["light"]]
transform = Transform3D(-0.474489, 0.00043963, 0.880261, -0.000962231, 0.999999, -0.0010181, -0.880261, -0.00133009, -0.474488, 1.58768, 7.4335, -0.770522)
light_color = Color(1, 0.729412, 0.584314, 1)
light_energy = 5.0
light_volumetric_fog_energy = 5.876
light_size = 0.285
light_specular = 7.51
shadow_enabled = true
shadow_blur = 5.0
distance_fade_enabled = true
omni_range = 13.4551
omni_attenuation = 2.07053

[node name="OmniLight3D4" type="OmniLight3D" parent="NavigationRegion3D/Lights" groups=["light"]]
transform = Transform3D(-0.474489, 0.00043963, 0.880261, -0.000962231, 0.999999, -0.0010181, -0.880261, -0.00133009, -0.474488, 0.155213, 7.4335, -1.72583)
light_color = Color(1, 0.729412, 0.584314, 1)
light_energy = 5.0
light_volumetric_fog_energy = 5.876
light_size = 0.285
light_specular = 7.51
shadow_enabled = true
shadow_blur = 5.0
distance_fade_enabled = true
omni_range = 13.4551
omni_attenuation = 2.07053

[node name="OmniLight3D6" type="OmniLight3D" parent="NavigationRegion3D/Lights" groups=["light"]]
transform = Transform3D(-0.999999, -0.000963459, -0.00120521, -0.000962232, 0.999999, -0.0010181, 0.00120619, -0.00101694, -0.999999, -1.5532, 7.4335, -0.843466)
light_color = Color(1, 0.729412, 0.584314, 1)
light_energy = 5.0
light_volumetric_fog_energy = 5.876
light_size = 0.285
light_specular = 7.51
shadow_enabled = true
shadow_blur = 5.0
distance_fade_enabled = true
omni_range = 13.4551
omni_attenuation = 2.07053

[node name="OmniLight3D7" type="OmniLight3D" parent="NavigationRegion3D/Lights" groups=["light"]]
transform = Transform3D(0.474995, -0.000438865, -0.879988, -0.000962229, 0.999999, -0.0010181, 0.879988, 0.00133034, 0.474995, -1.62941, 7.4335, 0.806476)
light_color = Color(1, 0.729412, 0.584314, 1)
light_energy = 5.0
light_volumetric_fog_energy = 5.876
light_size = 0.285
light_specular = 7.51
shadow_enabled = true
shadow_blur = 5.0
distance_fade_enabled = true
omni_range = 13.4551
omni_attenuation = 2.07053

[node name="Chandelier" parent="NavigationRegion3D" instance=ExtResource("2_0nnng")]
transform = Transform3D(5, 0.00481436, 0.00314609, -0.00481115, 4.99999, -0.00509048, -0.00315099, 0.00508745, 5, 3.08319e-10, 9.84045, 3.72529e-09)

[node name="Chandelier_01" parent="NavigationRegion3D/Chandelier" index="0"]
surface_material_override/1 = SubResource("StandardMaterial3D_02gmj")

[node name="RoomFloor" type="CSGMesh3D" parent="NavigationRegion3D" groups=["carpet"]]
material_override = SubResource("StandardMaterial3D_nhbx2")
use_collision = true
mesh = SubResource("BoxMesh_ap6py")

[node name="RoomOuter" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.999999, 0.000962871, 0.000629219, -0.00096223, 0.999999, -0.0010181, -0.000630198, 0.00101749, 0.999999, 0, 5, 0)
material_override = ExtResource("3_m1th1")
use_collision = true
size = Vector3(10, 10, 10)

[node name="RoomInner" type="CSGBox3D" parent="NavigationRegion3D/RoomOuter"]
transform = Transform3D(1, -5.74119e-12, 0, -7.16227e-12, 1, -1.16415e-10, 0, 1.16415e-10, 1, 0, -0.5, 0)
operation = 2
size = Vector3(9.5, 12.515, 9.5)

[node name="NorthEntrance" type="CSGBox3D" parent="NavigationRegion3D/RoomOuter" node_paths=PackedStringArray("opening", "area") groups=["entrance"]]
transform = Transform3D(1, -5.74119e-12, 0, -7.16227e-12, 1, -1.16415e-10, 0, 1.16415e-10, 1, 0, -3.75, 5)
operation = 2
size = Vector3(2, 4, 1)
script = ExtResource("2_4o6ve")
direction = "north"
notes = "normal"
opening = NodePath(".")
canLinkToOthers = true
area = NodePath("Area3D")

[node name="Area3D" type="Area3D" parent="NavigationRegion3D/RoomOuter/NorthEntrance"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/RoomOuter/NorthEntrance/Area3D"]
transform = Transform3D(1, -5.91172e-12, 0, -7.21911e-12, 1, -2.32831e-10, 0, 2.32831e-10, 1, 0, 0, 0)
shape = SubResource("BoxShape3D_u2h5k")

[node name="SouthEntrance" type="CSGBox3D" parent="NavigationRegion3D/RoomOuter" node_paths=PackedStringArray("opening", "area") groups=["entrance"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -3.75, -5)
operation = 2
size = Vector3(2, 4, 1)
script = ExtResource("2_4o6ve")
direction = "south"
notes = "normal"
opening = NodePath(".")
canLinkToOthers = true
area = NodePath("Area3D")

[node name="Area3D" type="Area3D" parent="NavigationRegion3D/RoomOuter/SouthEntrance"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/RoomOuter/SouthEntrance/Area3D"]
shape = SubResource("BoxShape3D_u2h5k")

[node name="EastEntrance" type="CSGBox3D" parent="NavigationRegion3D/RoomOuter" node_paths=PackedStringArray("opening", "area") groups=["entrance"]]
transform = Transform3D(-4.37722e-08, -7.84439e-12, 1, -1.16415e-10, 1, 5.74119e-12, -1, 0, -4.37722e-08, -5, -3.75, 2.18861e-07)
operation = 2
size = Vector3(2, 4, 1)
script = ExtResource("2_4o6ve")
direction = "east"
notes = "normal"
opening = NodePath(".")
canLinkToOthers = true
area = NodePath("Area3D")

[node name="Area3D" type="Area3D" parent="NavigationRegion3D/RoomOuter/EastEntrance"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/RoomOuter/EastEntrance/Area3D"]
shape = SubResource("BoxShape3D_u2h5k")

[node name="WestEntrance" type="CSGBox3D" parent="NavigationRegion3D/RoomOuter" node_paths=PackedStringArray("opening", "area") groups=["entrance"]]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 5, -3.75, -2.18557e-07)
operation = 2
size = Vector3(2, 4, 1)
script = ExtResource("2_4o6ve")
direction = "west"
notes = "normal"
opening = NodePath(".")
canLinkToOthers = true
area = NodePath("Area3D")

[node name="Area3D" type="Area3D" parent="NavigationRegion3D/RoomOuter/WestEntrance"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/RoomOuter/WestEntrance/Area3D"]
shape = SubResource("BoxShape3D_u2h5k")

[node name="RoomBoundaries" type="Area3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 0)
collision_mask = 17
input_ray_pickable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/RoomBoundaries"]
shape = SubResource("BoxShape3D_yi4rm")

[node name="RoomCeiling" type="CSGMesh3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 9.98327, 0)
use_collision = true
mesh = SubResource("QuadMesh_852hj")
material = SubResource("StandardMaterial3D_y3x5l")

[node name="Gate Of Horn" parent="NavigationRegion3D" instance=ExtResource("5_mt2wr")]
transform = Transform3D(-1, 0, -8.9407e-08, 0, 1, 0, 8.9407e-08, 0, -1, 0, 2.3, 0)

[node name="NavigationObstacle3D" type="NavigationObstacle3D" parent="NavigationRegion3D/Gate Of Horn"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.32121, 0)
height = 4.8
vertices = PackedVector3Array(2, 0, -0.8, -2, 0, -0.8, -2, 0, 0.8, 2, 0, 0.8)

[node name="Gate Of Ivory" parent="NavigationRegion3D" instance=ExtResource("6_5hcfa")]
transform = Transform3D(-1, 0, -8.9407e-08, 0, 1, 0, 8.9407e-08, 0, -1, 0, 2.3, 0)

[node name="NavigationObstacle3D" type="NavigationObstacle3D" parent="NavigationRegion3D/Gate Of Ivory"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.32121, 0)
height = 4.8
vertices = PackedVector3Array(2, 0, -0.8, -2, 0, -0.8, -2, 0, 0.8, 2, 0, 0.8)

[connection signal="body_entered" from="NavigationRegion3D/RoomBoundaries" to="." method="_on_room_boundaries_body_entered"]

[editable path="NavigationRegion3D/Chandelier"]
